{% extends 'base.html' %}

{% block title %}Əlaqə - Əli Həsənov{% endblock %}

{% block content %}
<!-- Page Header -->
<section class="bg-gradient-to-r from-indigo-700 via-indigo-800 to-indigo-900 text-white py-12 shadow-md">
    <div class="container mx-auto px-6 text-center">
        <h1 class="text-4xl font-bold">Mənimlə Əlaqə</h1>
        <p class="text-lg text-indigo-200 mt-2">Gəlin əlaqə saxlayaq və layihənizi müzakirə edək.</p>
    </div>
</section>

<!-- Contact Section -->
<section class="py-16 lg:py-20 bg-gray-100">
    <div class="container mx-auto px-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-10 lg:gap-16 max-w-6xl mx-auto">

            <!-- Contact Information Card -->
            <div class="bg-white p-8 rounded-lg shadow-xl border border-gray-200">
                <h2 class="text-2xl font-semibold mb-6 text-gray-800">Əlaqə Saxlayın</h2>
                <p class="text-gray-600 mb-8 leading-relaxed">Telefon, e-poçt vasitəsilə əlaqə saxlamaqdan və ya LinkedIn-də bağlantı qurmaqdan çəkinməyin. Yeni layihələrin, yaradıcı ideyaların və ya vizyonlarınızın bir hissəsi olmaq imkanlarını müzakirə etməyə həmişə açığam.</p>

                <ul class="space-y-5 text-gray-700">
                    <li class="flex items-center group">
                        <i class="fas fa-phone fa-fw mr-3 text-indigo-600 text-lg transition duration-200 group-hover:text-indigo-800"></i>
                        <a href="tel:+994707616288" class="hover:text-indigo-800 transition duration-200">+994 70 761-62-88</a>
                    </li>
                    <li class="flex items-center group">
                        <i class="fas fa-envelope fa-fw mr-3 text-indigo-600 text-lg transition duration-200 group-hover:text-indigo-800"></i>
                        <a href="mailto:contact@ali-hasanov.com" class="hover:text-indigo-800 transition duration-200">contact@ali-hasanov.com</a>
                    </li>
                    <li class="flex items-start group">
                        <i class="fas fa-map-marker-alt fa-fw mr-3 text-indigo-600 text-lg pt-1 transition duration-200 group-hover:text-indigo-800"></i>
                        <span>Akademik Zahid Xəlilov küçəsi 23, Bakı 1148</span>
                    </li>
                    <li class="flex items-center group">
                        <i class="fab fa-linkedin fa-fw mr-3 text-indigo-600 text-lg transition duration-200 group-hover:text-indigo-800"></i>
                        <a href="https://linkedin.com/in/ali-hasanov" target="_blank" rel="noopener noreferrer" class="hover:text-indigo-800 transition duration-200">linkedin.com/in/ali-hasanov</a>
                    </li>
                     <!-- Add Website icon/link if applicable -->
                     <!-- <li class="flex items-center">
                        <i class="fas fa-globe mr-3 text-blue-600 w-5 text-center"></i>
                        <a href="https://www.ali-hasanov.com" target="_blank" rel="noopener noreferrer" class="hover:text-blue-700">www.ali-hasanov.com</a>
                    </li> -->
                </ul>

                <!-- Google Map Embed -->
                <div class="mt-8">
                    <iframe
                        src="https://www.google.com/maps/embed/v1/place?key=AIzaSyDDfUjtovRKit-fQpTAxdbSbdOHRn0NHMg&q=Bakı+Dövlət+Universiteti,+Baku,+Azerbaijan"  {# Replace YOUR_API_KEY if needed, though often not required for basic embeds #}
                        width="100%"
                        height="300"
                        style="border:0;"
                        allowfullscreen=""
                        loading="lazy"
                        referrerpolicy="no-referrer-when-downgrade"
                        class="rounded-md shadow-md w-full">
                    </iframe>
                </div>
            </div>

            <!-- Contact Form Card -->
            <div class="bg-white p-8 rounded-lg shadow-xl border border-gray-200">
                <h2 class="text-2xl font-semibold mb-6 text-gray-800">Mesaj Göndər</h2>
                <!-- Assuming a Flask-WTF form object 'form' is passed to the template -->
                {% if form %}
                {# Removed method and action, added id for JS targeting #}
                <form id="contact-form" novalidate class="space-y-6">
                    {# CSRF token might not be needed for client-side submission, but keep for now if form object requires it #}
                    {{ form.hidden_tag() }}

                    <div>
                        {{ form.name.label(class="block text-sm font-medium text-gray-700 mb-1") }}
                        {{ form.name(class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 ease-in-out" + (" border-red-500" if form.name.errors else ""), placeholder="Adınız") }}
                        {% if form.name.errors %}
                            <ul class="text-red-600 text-xs mt-1">{% for error in form.name.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                        {% endif %}
                    </div>

                    <div>
                        {{ form.email.label(class="block text-sm font-medium text-gray-700 mb-1") }}
                        {{ form.email(class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 ease-in-out" + (" border-red-500" if form.email.errors else ""), placeholder="E-poçtunuz") }}
                        {% if form.email.errors %}
                            <ul class="text-red-600 text-xs mt-1">{% for error in form.email.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                        {% endif %}
                    </div>

                    <div>
                         {{ form.subject.label(class="block text-sm font-medium text-gray-700 mb-1") }}
                         {{ form.subject(class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 ease-in-out" + (" border-red-500" if form.subject.errors else ""), placeholder="Mövzu") }}
                         {% if form.subject.errors %}
                            <ul class="text-red-600 text-xs mt-1">{% for error in form.subject.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                        {% endif %}
                    </div>

                    <div>
                        {{ form.message.label(class="block text-sm font-medium text-gray-700 mb-1") }}
                        {{ form.message(rows="5", class="w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 ease-in-out" + (" border-red-500" if form.message.errors else ""), placeholder="Mesajınız") }}
                        {% if form.message.errors %}
                            <ul class="text-red-600 text-xs mt-1">{% for error in form.message.errors %}<li>{{ error }}</li>{% endfor %}</ul>
                        {% endif %}
                    </div>

                    <div>
                        <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-6 rounded-md transition duration-300 ease-in-out shadow-md hover:shadow-lg transform hover:-translate-y-0.5">
                            Mesaj Göndər
                        </button>
                    </div>
                </form>
                {% else %}
                <p class="text-red-500">Əlaqə forması hazırda mövcud deyil.</p> {# Translated #}
                {% endif %}
            </div>
        </div>
    </div>
</section>

{% block extra_js %}
<script type="text/javascript">
  (function(){
      // Initialize EmailJS with your Public Key
      emailjs.init('EG6r1kdAmJ1MQ_SiA');
  })();

  window.onload = function() {
      const contactForm = document.getElementById('contact-form');
      if (contactForm) {
          contactForm.addEventListener('submit', function(event) {
              event.preventDefault(); // Prevent default form submission

              const submitButton = contactForm.querySelector('button[type="submit"]');
              const originalButtonText = submitButton.innerHTML;
              submitButton.disabled = true;
              // Add a simple loading indicator
              submitButton.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Göndərilir...';

              // Service ID and Template ID provided by user
              const serviceID = 'service_nj3enbg';
              const templateID = 'template_hqz6adp';

              // Send the form data using EmailJS
              emailjs.sendForm(serviceID, templateID, this)
                  .then(() => {
                      submitButton.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                      submitButton.classList.add('bg-green-500'); // Success color
                      submitButton.innerHTML = '<i class="fas fa-check mr-2"></i> Mesaj Göndərildi!';
                      contactForm.reset(); // Clear the form
                      // Reset button appearance after a delay
                      setTimeout(() => {
                          submitButton.disabled = false;
                          submitButton.classList.remove('bg-green-500');
                          submitButton.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
                          submitButton.innerHTML = originalButtonText;
                      }, 4000); // Reset button after 4 seconds
                      // You could also display a more prominent success message elsewhere
                  }, (err) => {
                      submitButton.disabled = false;
                      submitButton.classList.remove('bg-indigo-600', 'hover:bg-indigo-700');
                      submitButton.classList.add('bg-red-500'); // Error color
                      submitButton.innerHTML = '<i class="fas fa-exclamation-triangle mr-2"></i> Göndərmə Uğursuz Oldu';
                       // Reset button appearance after a delay
                       setTimeout(() => {
                          submitButton.disabled = false;
                          submitButton.classList.remove('bg-red-500');
                          submitButton.classList.add('bg-indigo-600', 'hover:bg-indigo-700');
                          submitButton.innerHTML = originalButtonText;
                      }, 5000); // Reset button after 5 seconds
                      console.error('EmailJS Xətası:', err); // Translated
                      alert('Mesaj göndərilmədi. Zəhmət olmasa, sonra yenidən cəhd edin və ya birbaşa əlaqə saxlayın. Xəta: ' + JSON.stringify(err));
                  });
          });
      } else {
          console.error("'contact-form' ID-li əlaqə forması tapılmadı."); // Translated
      }
  }
</script>
{% endblock %} {# This closes extra_js #}

{% endblock %} {# This closes content #}
